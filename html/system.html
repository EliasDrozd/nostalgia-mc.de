<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="/CSS/system.css">  
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
        <title>System Status</title>
        <style>
            @import url('https://fonts.googleapis.com/css2?family=Titillium+Web:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700&display=swap');
        </style>
    </head>
<body>

<!-- Script Embed -->
<script src="/JavaScript/index.js"></script>

<!-- Navigationbar Container -->
<div class="navbar-container">
    <!-- Navigationbar Content -->
    <div class="navbar-content">
        <ul>
            <li><a href="/HTML/index.html"><i class="bi bi-house"></i> Home</a></li>
            <li><a href="/HTML/blog.html"><i class="bi bi-file-earmark-text"></i> Blog</a></li>
            <li><a href="/HTML/system.html"><i class="bi bi-bar-chart"></i> System</a></li>
            <li><a href="/HTML/bewerbungen.html"><i class="bi bi-envelope-paper"></i> Bewerbungen</a></li>
        </ul>
    </div>
</div>

<!-- Header Container -->
<div class="header-container">
    <header>
        <h2>Services</h2>
    </header>
</div>

<!-- Services Container -->
<div class="services-container">
    <!-- Services Content -->
    <div class="services-content">
        <table>
            <thead>
                <tr>
                    <th width="480px">Service</th>
                    <th width="280px">Status</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Website</td>
                    <td><i class="bi bi-check-circle"></i> Online</td>
                </tr>
                <tr>
                    <td>Minecraft Server</td>
                    <td id="mc-server-status"><i class="bi bi-check-circle"></i> Online</td>
                </tr>
                <tr>
                    <td>Discord Server</td>
                    <td><i class="bi bi-check-circle"></i> Online</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- Footer -->
<div class="footer-container">
    <footer>
        <ul>
            <li><a href="#"><i class="bi bi-discord"></i> Discord</a></li>
            <li><a href="#"><i class="bi bi-instagram"></i> Instagram</a></li>
            <li><a href="#"><i class="bi bi-tiktok"></i> Tiktok</a></li>
            <li><a href="#"><i class="bi bi-info-circle"></i> Impressum</a></li>
        </ul>
    </footer>
</div>

<script src="https://mcapi.us/scripts/minecraft.min.js"></script>
<script>
    // Funktion, um den Status des Minecraft Servers abzufragen
    async function checkServerStatus() {
        const serverAddress = 'mcs01.nostalgia-mc.de:25580'; // Minecraft Server Adresse
        const port = 25580;

        const apiUrl = `https://mcapi.us/server/status?ip=${'mcs01.nostalgia-mc.de'}&port=${25580}`;

        try {
            const response = await fetch(apiUrl);
            const data = await response.json();

            // Status anzeigen
            if (data.online) {
                document.getElementById("mc-server-status").innerHTML = 
                    '<i class="bi bi-check-circle" style="color: rgb(22, 194, 22);"></i> Online';
            } else {
                document.getElementById("mc-server-status").innerHTML = 
                    '<i class="bi bi-x-circle" style="color: red;"></i> Offline';
            }
        } catch (error) {
            document.getElementById("mc-server-status").innerHTML = 
                '<i class="bi bi-x-circle" style="color: red;"></i> Error, couldnt fetch data!';
        }
    }

    // Alle 30 Sekunden den Status aktualisieren
    setInterval(checkServerStatus, 80000);

    // Beim Laden der Seite den Status initial abfragen
    checkServerStatus();
</script>

</body>
</html>